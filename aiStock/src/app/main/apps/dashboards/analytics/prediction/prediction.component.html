<div id="predictions" class="page-layout carded fullwidth inner-scroll">
    <!-- CENTER -->
    <div class="header p-16 p-sm-18" fxLayout="column" fxLayoutAlign="start start" fxLayout.gt-xs="row"
        fxLayoutAlign.gt-xs="space-between center">

        <!-- <div class="logo" fxLayout="row" fxLayoutAlign="start center">
            <mat-icon class="logo-icon mr-16" [@animate]="{value:'*',params:{delay:'50ms',scale:'0.2'}}">
                shopping_basket
            </mat-icon>
            <span class="logo-text h1" [@animate]="{value:'*',params:{delay:'100ms',x:'-25px'}}">Predictions</span>
        </div> -->
        <div fxLayout="row" fxLayoutAlign="start center">
            <div class="logo" fxLayout="row" fxLayoutAlign="start center">
                <span class="logo-text h3" [@animate]="{value:'*',params:{delay:'100ms',x:'-25px'}}">
                    <a [routerLink]="'/apps/dashboards/analytics'"
                        style="text-decoration: none;color:#b1b1b4;vertical-align:middle;">
                        <mat-icon style="vertical-align:middle;">keyboard_backspace</mat-icon>Back
                    </a>
                    <p style="margin: 30px; vertical-align:middle; display: inline;">{{stockName}} Stocks</p>
                </span>
            </div>
        </div>
        <div fxHide.xs fxLayout="row">
            <span style="cursor:pointer;" [routerLink]="'/apps/dashboards/analytics'">Home
                &nbsp;&nbsp;-&nbsp;&nbsp;</span>
            <span class="breadcrumb"> Prediction Groups &nbsp;&nbsp;-&nbsp;&nbsp; </span>
            <span class="breadcrumb">{{stockName}} Stocks</span>
        </div>
        <!-- <div class="search-input-wrapper ml-sm-16" fxFlex="1 0 auto" fxLayout="row" fxLayoutAlign="start center">
            <label for="search" class="mr-8">
                <mat-icon class="secondary-text">search</mat-icon>
            </label>
            <mat-form-field floatLabel="never" fxFlex="1 0 auto">
                <input id="search" matInput #filter placeholder="Search">
            </mat-form-field>
        </div> -->
    </div>
    <div class="main-widget">
        <div fxLayout="row" fxLayout.xs="column" class="nav-header">
            <div class="nav-bar" fxFlex="0 1 calc(30% - 0.5%)" fxFlex.lt-md="0 1 calc(50% - 0.5%)" fxFlex.lt-sm="100%"
                fxLayoutAlign="start center" [ngClass]="{active: activeStockTab == 'listStocks'}"
                (click)="activeStock('listStocks')" style="height:120px;">
                <div class="logo">
                    <span>
                        <mat-icon>sort</mat-icon>
                    </span>
                </div>

                <div class="info">
                    <div class="title fontSize">List of Stocks</div>
                    <div class="address bgColor">Choose a stock from the selected prediction groups</div>
                </div>
            </div>
            <div class="nav-bar" fxFlex="0 1 calc(30% - 0.5%)" fxFlex.lt-md="0 1 calc(50% - 0.5%)" fxFlex.lt-sm="100%"
                fxLayoutAlign="start center" [ngClass]="{active: activeStockTab == 'criteria'}"
                (click)="activeStock('criteria')" style="height:120px;">
                <div class="logo">
                    <span>
                        <mat-icon>view_comfy</mat-icon>
                    </span>
                </div>

                <div class="info">
                    <div class="title fontSize">Grouping Criteria</div>
                    <div class="address bgColor">Get to know how we categorize stock into groups</div>
                </div>
            </div>
        </div>
    </div>
    <div class="center">
        <!--  <div class="search-input-wrapper ml-sm-16" fxFlex="1 0 auto" fxLayout="row" fxLayoutAlign="start center">
            <label for="search" class="mr-8">
                <mat-icon class="secondary-text">search</mat-icon>
            </label>
            <mat-form-field floatLabel="never" fxFlex="1 0 auto">
                <input id="search" matInput #filter placeholder="Search">
            </mat-form-field>
        </div> -->
        <div class="filter-bar" fxLayout="column" fxLayoutAlign="start" fxLayout.gt-sm="row"
            fxLayoutAlign.gt-sm="start start">

            <!-- Widget 2 -->
            <div class="widget filter" fxFlex-sm="25">
                <mat-form-field fxLayout="row" fxLayout.xs="column" floatLabel="never">
                    <mat-select placeholder="Market Cap">
                        <mat-option *ngFor="let cap of marketcaps" [value]="cap.value">
                            {{cap.viewValue}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
            <div class="widget filter" fxFlex-sm="25">
                <mat-form-field fxLayout="row" fxLayout.xs="column" floatLabel="never">
                    <mat-select placeholder="Sector">
                        <mat-option *ngFor="let sector of sectors" [value]="sector.value">
                            {{sector.viewValue}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
            <div class="widget filter" fxFlex-sm="25">
                <mat-form-field fxLayout="row" fxLayout.xs="column" floatLabel="never">
                    <mat-select placeholder="Trending">
                        <mat-option *ngFor="let trend of trending" [value]="trend.value">
                            {{trend.viewValue}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
            <!-- <div class="widget filter" fxFlex.sm="25">
                <mat-form-field fxLayout="row" fxLayout.xs="column" floatLabel="never">
                    <mat-select placeholder="Tools">
                        <mat-option *ngFor="let food of foods" [value]="food.value">
                            {{food.viewValue}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div> -->
            <div class="widget search-bar" fxFlex.sm="25">
                <mat-form-field floatLabel="never">
                    <input id="search" matInput #filter placeholder="Search">
                    <mat-icon matSuffix>search</mat-icon>
                </mat-form-field>
            </div>
            <!-- / Widget 2 -->

        </div>
        <!--      <div class="filter-bar-tab" fxLayout="column" fxLayoutAlign="center">

            <div class="filters" fxLayout="column" fxLayoutAlign="center center" fxLayout.gt-xs="row"
                fxLayoutAlign.gt-xs="space-between center" fxLayoutAlign.xs="start stretch">
                <div class="filters-left" fxLayout.gt-xs="row">
                    <mat-form-field (click)="active_filter('all')" class="bgColortoggle"
                        [ngClass]="{active: activeFilterTab == 'all' }" floatLabel="never">
                        <mat-select placeholder="All">
                            <mat-option *ngFor="let food of marketcaps" [value]="food.value">
                                {{food.viewValue}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                    <mat-form-field (click)="active_filter('country')" class="bgColortoggle"
                        [ngClass]="{active: activeFilterTab == 'country' }" floatLabel="never">
                        <mat-select placeholder="Country">
                            <mat-option *ngFor="let food of sectors" [value]="food.value">
                                {{food.viewValue}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                    <mat-form-field (click)="active_filter('exchange')" class="bgColortoggle"
                        [ngClass]="{active: activeFilterTab == 'exchange' }" floatLabel="never">
                        <mat-select placeholder="Exchange">
                            <mat-option *ngFor="let food of trending" [value]="food.value">
                                {{food.viewValue}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>
                <div class="filters-right" fxLayout.gt-xs="row">
                    <button (click)="paginate('next')" [ngClass]="{active: paginateTab == 'next' }" mat-flat-button>Next
                        100 <mat-icon style="font-size:18px; vertical-align:center">
                            arrow_forward</mat-icon>
                    </button>
                    <button (click)="paginate('view')" [ngClass]="{active: paginateTab == 'view' }" mat-flat-button>View
                        All</button>
                    &nbsp;&nbsp;&nbsp;
                    <mat-form-field floatLabel="never">
                        <mat-select placeholder="USD">
                            <mat-option *ngFor="let food of foods" [value]="food.value">
                                {{food.viewValue}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>
            </div>
        </div> -->


        <!-- CONTENT CARD -->
        <div class="content-card mat-white-bg">

            <mat-table class="predictions-table" #table [dataSource]="dataSource" matSort
                [@animateStagger]="{value:'50'}" fusePerfectScrollbar>
                <!-- ID Column -->
                <ng-container matColumnDef="ticker">
                    <mat-header-cell *matHeaderCellDef mat-sort-header fxHide fxShow.gt-sm>Ticker</mat-header-cell>
                    <mat-cell *matCellDef="let prediction" fxHide fxShow.gt-sm>
                        <p class="text-truncate">{{prediction.ticker}}</p>
                    </mat-cell>
                </ng-container>

                <!-- Reference Column -->
                <ng-container matColumnDef="stockName">
                    <mat-header-cell *matHeaderCellDef mat-sort-header>Stock Name</mat-header-cell>

                    <mat-cell *matCellDef="let prediction">
                        <img src="assets/images/company/{{prediction.ticker_image}}.png" height="25px" width="25px">
                        <p class="text-truncate iconWidth"
                            (click)="openStockDetail(prediction.id,prediction.addedToPortfolio)">
                            {{prediction.stock_name}}</p>
                    </mat-cell>

                </ng-container>

                <!-- Name Column -->
                <ng-container matColumnDef="recommendedPrice">
                    <mat-header-cell *matHeaderCellDef mat-sort-header fxHide fxShow.gt-md>Recommended Price
                    </mat-header-cell>
                    <mat-cell *matCellDef="let prediction" fxHide fxShow.gt-md>
                        <p class="text-truncate">
                            {{prediction.recommended_price | currency:'USD':'symbol'}}
                        </p>
                    </mat-cell>
                </ng-container>

                <!-- Total Price Column -->
                <ng-container matColumnDef="currentPrice">
                    <mat-header-cell *matHeaderCellDef mat-sort-header fxHide fxShow.gt-sm>Current Price
                    </mat-header-cell>
                    <mat-cell *matCellDef="let prediction" fxHide fxShow.gt-sm>
                        <p class="total-price text-truncate">
                            {{prediction.suggested_date_price | currency:'USD':'symbol'}}
                        </p>
                    </mat-cell>
                </ng-container>

                <!-- Payment Column -->
                <ng-container matColumnDef="suggestedDate">
                    <mat-header-cell *matHeaderCellDef mat-sort-header fxHide fxShow.gt-sm>Suggested Date
                    </mat-header-cell>
                    <mat-cell *matCellDef="let prediction" fxHide fxShow.gt-sm>
                        <p class="text-truncate">
                            {{prediction.suggested_date | date:'dd MMMM y'}}
                        </p>
                    </mat-cell>
                </ng-container>

                <!-- Status Column -->
                <ng-container matColumnDef="tragetPrice">
                    <mat-header-cell *matHeaderCellDef mat-sort-header fxHide fxShow.gt-sm>Traget Price
                    </mat-header-cell>
                    <mat-cell *matCellDef="let prediction" fxHide fxShow.gt-sm>
                        <p class="status text-truncate h6 p-4">
                            {{prediction.target_price| currency:'USD':'symbol'}}
                        </p>
                    </mat-cell>
                </ng-container>

                <!-- Date Column -->
                <ng-container matColumnDef="action">
                    <mat-header-cell *matHeaderCellDef mat-sort-header>Action</mat-header-cell>
                    <mat-cell *matCellDef="let prediction">
                        <p class="">
                            <button *ngIf="prediction.addedToPortfolio === false" class="submit-button"
                                mat-stroked-button (click)="addToPortfolioSubmit(prediction.id)">Add to
                                portfolio</button>
                            <button style="color: white;
                            background-color: #7F63F4;" *ngIf="prediction.addedToPortfolio === true"
                                class="submit-button" mat-stroked-button disabled>Already Added</button>
                        </p>
                    </mat-cell>
                </ng-container>

                <mat-header-row *matHeaderRowDef="displayedColumns;"></mat-header-row>

                <mat-row *matRowDef="let prediction; columns: displayedColumns;">
                </mat-row>
            </mat-table>
            <div class="subscribed-text" *ngIf="_predictionListService.isSubscribed == 'false'">
                <h2 fxLayoutAlign="start start">Subscribe for full list of stocks.</h2>
            </div>
            <mat-paginator #paginator [length]="dataSource.filteredData.length" [pageIndex]="0" [pageSize]="10"
                [pageSizeOptions]="[5, 10, dataSource.filteredData.length]">

            </mat-paginator>

        </div>
        <!-- / CONTENT CARD -->
    </div>
    <!-- / CENTER -->
</div>